<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jks.dao.PartybulidMapper">
  <resultMap id="BaseResultMap" type="com.jks.entity.Partybulid">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ID" jdbcType="INTEGER" property="id" />
    <result column="Admcode" jdbcType="VARCHAR" property="admcode" />
    <result column="Year" jdbcType="VARCHAR" property="year" />
    <result column="City" jdbcType="VARCHAR" property="city" />
    <result column="PartyMember" jdbcType="INTEGER" property="partymember" />
    <result column="BranchNum" jdbcType="INTEGER" property="branchnum" />
    <result column="StuPartyNum" jdbcType="INTEGER" property="stupartynum" />
    <result column="PartyWorkTrain" jdbcType="INTEGER" property="partyworktrain" />
    <result column="PartyTain" jdbcType="INTEGER" property="partytain" />
    <result column="PartyActivistTrainNum" jdbcType="INTEGER" property="partyactivisttrainnum" />
    <result column="PartyActivistTrainTime" jdbcType="INTEGER" property="partyactivisttraintime" />
    <result column="DevelopPartyNum" jdbcType="INTEGER" property="developpartynum" />
    <result column="SubscribNum" jdbcType="INTEGER" property="subscribnum" />
    <result column="Punish" jdbcType="INTEGER" property="punish" />
    <result column="StatePer" jdbcType="INTEGER" property="stateper" />
    <result column="ProvinPer" jdbcType="INTEGER" property="provinper" />
    <result column="CityPer" jdbcType="INTEGER" property="cityper" />
    <result column="StateOrgan" jdbcType="INTEGER" property="stateorgan" />
    <result column="ProvinOrgan" jdbcType="INTEGER" property="provinorgan" />
    <result column="CityOrgan" jdbcType="INTEGER" property="cityorgan" />
    <result column="Audit" jdbcType="INTEGER" property="audit" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    ID, Admcode, Year, City, PartyMember, BranchNum, StuPartyNum, PartyWorkTrain, PartyTain, 
    PartyActivistTrainNum, PartyActivistTrainTime, DevelopPartyNum, SubscribNum, Punish, 
    StatePer, ProvinPer, CityPer, StateOrgan, ProvinOrgan, CityOrgan, Audit
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from partybulid
    where ID = #{id,jdbcType=INTEGER}
  </select>
  <select id="getPartyBulidList"  resultType="Partybulid" parameterType="java.lang.String">
		SELECT * FROM partybulid WHERE 1 = 1
		  <if test="admcode != null and admcode != ''">
           AND `Admcode` = #{admcode}
         </if>
		 <if test="year != null and year != ''">
           AND `Year` = #{year}
         </if>
      
	</select>
	<select id="getPartyBulidListByAdmin"  resultType="Partybulid" parameterType="java.lang.String">
		SELECT * FROM partybulid WHERE Audit = 1
		  <if test="admcode != null and admcode != ''">
           AND `Admcode` = #{admcode}
         </if>
		 <if test="year != null and year != ''">
           AND `Year` = #{year}
         </if>
      
	</select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from partybulid
    where ID = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="savePartyBulid" parameterType="Partybulid">
  	insert into partybulid(Admcode, Year, 
      City, PartyMember, BranchNum, 
      StuPartyNum, PartyWorkTrain, PartyTain, 
      PartyActivistTrainNum, PartyActivistTrainTime, 
      DevelopPartyNum, SubscribNum, Punish, 
      StatePer, ProvinPer, CityPer, 
      StateOrgan, ProvinOrgan, CityOrgan, 
      Audit)values(#{admcode,jdbcType=VARCHAR}, #{year,jdbcType=VARCHAR}, 
      #{city,jdbcType=VARCHAR}, #{partymember,jdbcType=INTEGER}, #{branchnum,jdbcType=INTEGER}, 
      #{stupartynum,jdbcType=INTEGER}, #{partyworktrain,jdbcType=INTEGER}, #{partytain,jdbcType=INTEGER}, 
      #{partyactivisttrainnum,jdbcType=INTEGER}, #{partyactivisttraintime,jdbcType=INTEGER}, 
      #{developpartynum,jdbcType=INTEGER}, #{subscribnum,jdbcType=INTEGER}, #{punish,jdbcType=INTEGER}, 
      #{stateper,jdbcType=INTEGER}, #{provinper,jdbcType=INTEGER}, #{cityper,jdbcType=INTEGER}, 
      #{stateorgan,jdbcType=INTEGER}, #{provinorgan,jdbcType=INTEGER}, #{cityorgan,jdbcType=INTEGER}, 
      0)
  </insert>
  <delete id="deletePartyBulid" parameterType="Partybulid">
		DELETE FROM partybulid WHERE id=#{id}
	</delete>
	
	<select id="findById" parameterType="int" resultType="Partybulid">    
        select * from partybulid where id=#{id}    
    </select> 
 
  <insert id="insert" parameterType="com.jks.entity.Partybulid">
    insert into partybulid (ID, Admcode, Year, 
      City, PartyMember, BranchNum, 
      StuPartyNum, PartyWorkTrain, PartyTain, 
      PartyActivistTrainNum, PartyActivistTrainTime, 
      DevelopPartyNum, SubscribNum, Punish, 
      StatePer, ProvinPer, CityPer, 
      StateOrgan, ProvinOrgan, CityOrgan, 
      Audit)
    values (#{id,jdbcType=INTEGER}, #{admcode,jdbcType=VARCHAR}, #{year,jdbcType=VARCHAR}, 
      #{city,jdbcType=VARCHAR}, #{partymember,jdbcType=INTEGER}, #{branchnum,jdbcType=INTEGER}, 
      #{stupartynum,jdbcType=INTEGER}, #{partyworktrain,jdbcType=INTEGER}, #{partytain,jdbcType=INTEGER}, 
      #{partyactivisttrainnum,jdbcType=INTEGER}, #{partyactivisttraintime,jdbcType=INTEGER}, 
      #{developpartynum,jdbcType=INTEGER}, #{subscribnum,jdbcType=INTEGER}, #{punish,jdbcType=INTEGER}, 
      #{stateper,jdbcType=INTEGER}, #{provinper,jdbcType=INTEGER}, #{cityper,jdbcType=INTEGER}, 
      #{stateorgan,jdbcType=INTEGER}, #{provinorgan,jdbcType=INTEGER}, #{cityorgan,jdbcType=INTEGER}, 
      #{audit,jdbcType=INTEGER})
  </insert>
  
  
  <update id="updatePartyBulid" parameterType="Partybulid">
   
    update partybulid
    set 
      Year = #{year,jdbcType=VARCHAR},
      PartyMember = #{partymember,jdbcType=INTEGER},
      BranchNum = #{branchnum,jdbcType=INTEGER},
      StuPartyNum = #{stupartynum,jdbcType=INTEGER},
      PartyWorkTrain = #{partyworktrain,jdbcType=INTEGER},
      PartyTain = #{partytain,jdbcType=INTEGER},
      PartyActivistTrainNum = #{partyactivisttrainnum,jdbcType=INTEGER},
      PartyActivistTrainTime = #{partyactivisttraintime,jdbcType=INTEGER},
      DevelopPartyNum = #{developpartynum,jdbcType=INTEGER},
      SubscribNum = #{subscribnum,jdbcType=INTEGER},
      Punish = #{punish,jdbcType=INTEGER},
      StatePer = #{stateper,jdbcType=INTEGER},
      ProvinPer = #{provinper,jdbcType=INTEGER},
      CityPer = #{cityper,jdbcType=INTEGER},
      StateOrgan = #{stateorgan,jdbcType=INTEGER},
      ProvinOrgan = #{provinorgan,jdbcType=INTEGER},
      CityOrgan = #{cityorgan,jdbcType=INTEGER}
     
    where ID = #{id,jdbcType=INTEGER}
  </update>
  
  <update id="updateAudit" parameterType="int">
		UPDATE partybulid SET 
	 	 Audit=1
		WHERE id=#{id}
	</update>
	<select id="findByCity"  resultType="Partybulid" parameterType="java.lang.String">
		SELECT * FROM partybulid WHERE 
		City LIKE CONCAT('%','${city}','%' ) 
		<if test="year != null and year != ''">
           AND `Year` = #{year}
        </if>
    </select> 
    <select id="adminFindByCity"  resultType="Partybulid" parameterType="java.lang.String">
		SELECT * FROM partybulid WHERE Audit=1 AND
		City LIKE CONCAT('%','${city}','%' ) 
		<if test="year != null and year != ''">
           AND `Year` = #{year}
        </if>
    </select> 
    
    <select id="checkYear" parameterType="Partybulid" resultType="java.lang.Integer">
		select count(*) from partybulid where Year=#{year} and Admcode=#{admcode}
	</select>
</mapper>